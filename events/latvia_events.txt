add_namespace = latvia_events

country_event = {
    #choosing a new economics minister
    id = latvia_events.1
    title = latvia_events.1.t
    desc = latvia_events.1.d
    picture = GFX_report_event_generic_read_write

    is_triggered_only = yes

    fire_only_once = yes

    option = {
        name = latvia_events.1.a
        complete_national_focus = LAT_focus_liepaja_SEZ_1
    }
    option = {
        name = latvia_events.1.b
        complete_national_focus = LAT_focus_karins
    }
    option = {
        name = latvia_events.1.c
        complete_national_focus = LAT_focus_swedbank
    }
}

country_event = {
    #president assasination attempt
    id = latvia_events.2
    title = latvia_events.2.t
    desc = latvia_events.2.d

    is_triggered_only = yes

    fire_only_once = yes

    option = {
        name = latvia_events.2.a
        set_country_flag = assasination_attempt_survived
        mark_focus_tree_layout_dirty = yes
        add_ideas = LAT_riots
    }
}

#civil war starts
country_event = {
    id = latvia_events.3
    title = latvia_events.3.t
    desc = latvia_events.3.d

    is_triggered_only = yes

    fire_only_once = yes
    
    immediate = {
        hidden_effect = {
            
            set_global_flag = latvian_civil_war
            
            set_autonomy = {
                target = LIE
                autonomy_state = autonomy_free
            }
            
            

            12 = {
                transfer_state_to = EST
            }
            190 = {
                transfer_state_to = KUZ
            }
            1018 = {
                transfer_state_to = SEL
            }

            LIE = {
                set_province_controller = 3319
            }

            SEL = {
                set_province_controller = 310
                set_province_controller = 6459
            }
            
            if = {
                limit = {
                    NOT = {
                        has_completed_focus = LAT_focus_liepaja_SEZ_4
                    }
                }
                LIE = {
                    transfer_state = 1017
                    load_oob = "LIE_SEZ"
                }
            }

            if = {
                limit = {
                    LAT = {
                        has_completed_focus = LAT_focus_ban_russian_in_work
                    }
                }

                #If banned russian in work add the country BRR Baltic Russian Republic in the civil war
                # **Updated** Now the Baltic Occupation Zone will annex 810

                810 = {
                    transfer_state_to = BOZ
                }
                
            }


            #Latvia

            LAT = {
                add_ideas = LAT_army_breakdown
                remove_ideas = LAT_gunars_ansins
                
                add_state_claim = 190
                add_state_claim = 1017
                add_state_claim = 809
                add_state_claim = 808
                add_state_claim = 1018
                add_state_claim = 810
                add_state_claim = 12

                declare_war_on = {
                    target = LIE
                    type = annex_everything
                }
                declare_war_on = {
                    target = KUZ
                    type = annex_everything
                }
                declare_war_on = {
                    target = SEL
                    type = annex_everything
                }
            }

            #Liepaja

            LIE = {

                set_technology = {
                    infantry_weapons1 = 1
                    fighter1 = 1
                }

                mark_focus_tree_layout_dirty = yes
                load_focus_tree = LIE_focus_civil_war

                add_state_claim = 190
                add_state_claim = 1017
                add_state_claim = 809
                add_state_claim = 808
                add_state_claim = 1018
                add_state_claim = 810
                add_state_claim = 12

                declare_war_on = {
                    target = LAT
                    type = annex_everything
                }
                declare_war_on = {
                    target = KUZ
                    type = annex_everything
                }
                declare_war_on = {
                    target = SEL
                    type = annex_everything
                }
            }

            #Kurzeme

            add_ideas = war_economy
            add_ideas = service_by_requirement

            KUZ = {
                load_oob = "KUZ_civil_war"

                add_state_claim = 190
                add_state_claim = 1017
                add_state_claim = 809
                add_state_claim = 808
                add_state_claim = 1018
                add_state_claim = 810
                add_state_claim = 12

                declare_war_on = {
                    target = LIE
                    type = annex_everything
                }
                declare_war_on = {
                    target = LAT
                    type = annex_everything
                }
                declare_war_on = {
                    target = SEL
                    type = annex_everything
                }
            }

            #Selija
            
            SEL = {
                load_oob = "SEL_civil_war"

                add_ideas = war_economy
                add_ideas = service_by_requirement

                add_state_claim = 190
                add_state_claim = 1017
                add_state_claim = 809
                add_state_claim = 808
                add_state_claim = 1018
                add_state_claim = 810
                add_state_claim = 12

                declare_war_on = {
                    target = LIE
                    type = annex_everything
                }
                declare_war_on = {
                    target = KUZ
                    type = annex_everything
                }
                declare_war_on = {
                    target = LAT
                    type = annex_everything
                }

                diplomatic_relation = {
                    country = LIT
                    relation = military_access
                }
            }

            #Lithuania

            LIT = {
                diplomatic_relation = {
                    country = SEL
                    relation = non_aggression_pact
                }
            }

        }
        
    }

    option = {
        name = latvia_events.3.a
        LIE = { change_tag_from = ROOT }
    }

    option = {
        name = latvia_events.3.b
    }
}